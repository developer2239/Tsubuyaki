<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>自分のつぶやき</title>
    <style>
        body {
            height: 100%;
            max-width: 100%;
            margin: 0;
            padding: 0;
            background: linear-gradient(to right,#e66465, #9198e5);
        }
        .header {
            margin-top: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 250px;
        }
        .profile_button {
            padding: 5px;
            border: 1px solid white;
            border-radius: 10px;
            color: white;
        }
        .tsubuyaki_button {
            width: 70px;
            padding: 5px;
            border: 1px solid white;
            border-radius: 10px;
            color: white;
            margin: 15px auto;
        }
        .contents {
            margin-bottom:60px;
        }
        .post {
            position: relative;
            width: 70%;
            max-width: 400px;
            margin: 0 auto;
            margin-top: 10px;
            padding: 10px;
            background-color: white;
            border: 1px solid white;
            border-radius: 15px;
        }
        .user_info {
            width: 60%;
            max-width:350px;
        }
        .delete_post_button {
            position: absolute;
            top: 0;
            right: 0;
        }
        .post_text {
            width: 60%;
            max-width: 350px;
        }
        /* pop-up window */
        .tsubuyaki_window {
            display: none;
            flex-flow: column;
            justify-content: center;
            gap:30px;
            width: 350px;
            height: 350px;
            position: fixed;
            inset: 0;
            background-color: gray;
            margin: auto;
        }
        .close_tsubuyaki_window_button {
            position: absolute;
            top: 0;
            right: 0;
        }
        .my_info {
            text-align: center;
        }
        .tsubuyaki_text{
            text-align: center;
        }
        .tsubuyaki_text_input {
            width: 300px;
            height: 175px;
        }
        .tsubuyaki_submit {
            position: relative;
        }
        .tsubuyaki_submit_input {
            position: absolute;
            right: 0;
            margin: 10px 10px 0 0;
        }

    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <div class="title">
                つぶやきアプリ
            </div>
            <a href="/custom/">
                <div class="profile_button">
                    カスタム
                </div>
            </a>
        </div>
        <div class="contents">
            <div id="tsubuyaki_button" class="tsubuyaki_button">
                つぶやく
            </div>
            {% for post in posts%}
            <div class="post">
                <div class="user_info">{{ post.account.name }}@{{ post.account.id}}
                    <div id="delete_post_button" class="delete_post_button">
                        ×
                    </div>
                </div>
                <div class="post_text">{{ post.content }}</div>
                <div class="post_date">{{ post.created_at }}</div>
            </div>
            {% endfor %}
        </div>
    </div>
    <!-- Pop-up window -->
    <div id="tsubuyaki_window" class="tsubuyaki_window">
        <div class="my_info">
            ユーザー名1@userId00001
            <div id="close_tsubuyaki_window_button" class="close_tsubuyaki_window_button">
                ×
            </div>
        </div>
        <form action="/post/" method="POST">
            {% csrf_token %}
            <div class="tsubuyaki_text">
                <input class="tsubuyaki_text_input" type="text" id="content" name="content">
            </div>
            <div class="tsubuyaki_submit">
                <input class="tsubuyaki_submit_input" type="submit" value="つぶやく">
            </div>
        </form>
    </div>
    <!-- Pop-up window -->
    <script>
        // 新しいつぶやき作成のポップアップウィンドウ
        const tsubuyakiButton = document.getElementById('tsubuyaki_button');
        const tsubuyakiWindow = document.getElementById('tsubuyaki_window');
        const closeTsubuyakiWindowButton = document.getElementById('close_tsubuyaki_window_button')
        tsubuyakiButton.addEventListener('click', function() {
            tsubuyakiWindow.style.display = 'flex';
        });
        closeTsubuyakiWindowButton.addEventListener('click', function() {
            tsubuyakiWindow.style.display = 'none';
        });

        // ポスト削除ポップアップウィンドウ
        const deletePostButton = document.getElementById('delete_post_button');
        deletePostButton.addEventListener('click',function(){
            let isdeleted = window.confirm('このポストを削除しますか？')
            if (isdeleted){
                window.alert("つぶやきを削除しました")
            } 
        });
    </script>
</body>
</html>